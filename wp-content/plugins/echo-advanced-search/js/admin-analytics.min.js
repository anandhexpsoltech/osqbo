jQuery(document).ready(function(a){function e(e){if(a(".asea-analytics-container").length>0){$first_ten_count=[],$first_ten_words=[],total=a("#"+e+" .asea-pie-data-list .asea-first-10").length,a("#"+e+" .asea-pie-data-list .asea-first-10").each(function(){$first_ten_count.push(a(this).find(".asea-pie-chart-count").text()),$first_ten_words.push(a(this).find(".asea-pie-chart-word").text())}),a("#"+e).hasClass("asea-pie-chart-container-show-data")&&($remaining_count=0,$remaining_words="Remaining Results",total=a("#"+e+" .asea-pie-data-list li").length,a("#"+e+" .asea-pie-data-list .asea-after-10").each(function(){$remaining_count+=Number(a(this).find(".asea-pie-chart-count").text())}),$first_ten_count.push($remaining_count),$first_ten_words.push($remaining_words)),a("#"+e+" .asea-pie-data-total").remove(),a("#"+e+" h4").append('<span class="asea-pie-data-total"> ( '+total+" )</span>"),a("#"+e+"-chart").remove(),a("#"+e+" .asea-pie-chart-right-col #asea-pie-chart").append('<canvas id="'+e+'-chart"><canvas>');var s=document.getElementById(e+"-chart").getContext("2d");new Chart(s,{type:"doughnut",data:{labels:$first_ten_words,datasets:[{data:$first_ten_count,backgroundColor:["#aed581","#4fc3f7","#FED32F","#ef5350","#D0D8E0","#ff8a65","#ba68c8","#4A7BEC","#768CA3","#8d6e63","#444444"]}]},options:{maintainAspectRatio:!1,legend:{display:!1,position:"left"}}})}}function s(a,e,s,t,n){return'<div class="eckb-top-notice-message"><div class="contents"><span class="'+s+'">'+(a?"<h4>"+a+"</h4>":"")+(e||"")+"</span>"+(t?'<button id="">'+a+"</h4>":"")+"</div></div>"}if(e("asea-popular-searches-data"),e("asea-no-result-popular-searches-data"),a(".asea-analytics-container").length>0&&a(".asea-pie-chart-cog").on("click",function(){var s=a(this).parent().parent().attr("id");a("#"+s).toggleClass(" asea-pie-chart-container-show-data"),e(s)}),a(".asea-reset-container").length>0){a(".asea-reset-analytics").click(function(){return a(".asea-dialog-box-form").toggleClass("asea-dialog-box-form--active"),!1}),a("#asea-reset-search-data #asea-accept-button").click(t),a("#asea-reset-cancel").click(function(){a("#asea-ajax-in-progress").dialog("close")});function t(){!function(e){a(".asea-dialog-box-loading").remove();let s='<div class="asea-dialog-box-loading"><div class="asea-admin-dbl__header"><div class="asea-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(e?"<h4>"+e+"</h4>":"")+"</div></div>";a(".asea-analytics-container").append(s)}("Processing ..."),a.ajax({type:"POST",dataType:"json",data:{action:"asea_handle_reset_request",_wpnonce_asea_search_analytics:a("#_wpnonce_asea_search_analytics").val(),kb_id:a("#asea_reset_analytics_kb_id").val()},url:ajaxurl,beforeSend:function(a){}}).done(function(e){a(".asea-dialog-box-loading").remove(),(e=e||"").message&&"false"===e.error?(msg=e.message?s("",e.message,"success"):s("","Advanced Search: Error occurred. Please try again later. (L01)","error"),a(".asea-pie-chart-container, .asea-statistics-container").slideUp("fast")):e.message&&(msg=e.message?e.message:s("","Advanced Search: Error occurred. Please try again later. (L01)","error"))}).fail(function(e,s,t){msg=t?" ["+t+"]":"unknown error",a(".asea-dialog-box-loading").remove()}).always(function(){a("#asea-ajax-in-progress").dialog("close"),a(".asea-dbf__footer__cancel__btn").click(),a("#asea-reset-analytics-button").hide(),msg&&(a(".eckb-top-notice-message").length?a(".eckb-top-notice-message").replaceWith(msg):a(".epkb-config-wrapper").append(msg))})}}a(".asea-dbf__footer__cancel__btn, .asea-dbf__close").on("click",function(){a(this).parents(".asea-dialog-box-form").removeClass("asea-dialog-box-form--active")}),a("body").on("click",".asea-close-notice",function(){a(this).closest(".eckb-bottom-notice-message").remove()})});