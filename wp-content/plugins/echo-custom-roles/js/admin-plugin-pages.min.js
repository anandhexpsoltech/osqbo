jQuery(document).ready(function(s){s("#amcr-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide();var e=s("#ekcb-licenses");function a(){s("#amcr_license_check").html("");n("GET",{action:"amcr_handle_license_request",command:"get_license_info"},"Retrieving license status. Please wait.")}function n(e,a,n){var o;s(".eckb-top-notice-message").html(""),s.ajax({type:e,dataType:"json",data:a,url:ajaxurl,beforeSend:function(e){s("#amcr-ajax-in-progress").text(n).dialog("open")}}).done(function(e){if((e=e||"").message||void 0===e.output)o=e.message?e.message:i("","Roles Mapping: Error occurred. Please try again later. (L01)","error");else{var a=void 0!==e.output&&e.output?e.output:i("","Please reload the page and try again (L37).","error");s("#amcr_license_check").html(a)}}).fail(function(e,a,n){o=i("Roles Mapping: Error occurred. Please try again later. (L02)",o=n?" ["+n+"]":"unknown error","error")}).always(function(){s("#amcr-ajax-in-progress").dialog("close"),o&&(s(".eckb-bottom-notice-message").replaceWith(o),s("html, body").animate({scrollTop:0},"slow"))})}function i(e,a,n){return'<div class="eckb-bottom-notice-message"><div class="contents"><span class="'+n+'">'+(e?"<h4>"+e+"</h4>":"")+(a||"")+'</span></div><div class="amcr-close-notice fa fa-window-close"></div></div>'}s("#eckb_license_tab").hasClass("active")&&a(),s("#wpbody").on("click","#eckb_license_tab",function(e){a()}),e.on("click","#amcr_save_btn",function(e){e.preventDefault(),n("POST",{action:"amcr_handle_license_request",amcr_license_key:s("#amcr_license_key").val().trim(),_wpnonce_amcr_license_key:s("#_wpnonce_amcr_license_key").val(),command:"save"},"Saving license...")})});